<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Consumables - MLab Technical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="product-page.css">
</head>
<body>
    <nav>
        <div class="logo">Mlab Technical Service</div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="index.html#about">About Us</a>
            <a href="index.html#products">Products</a>
            <a href="index.html#contact">Contact</a>
        </div>
    </nav>

    <main>
        <section class="product-category-page">
            <div class="category-header">
                <h1>Lab Consumables</h1>
                <p class="category-description">
                    Our lab consumables are designed to meet the highest standards of quality and reliability for laboratory operations.
                </p>
            </div>

            <div class="product-list" id="productList">
                <!-- 产品列表将通过 JavaScript 动态生成 -->
            </div>

            <div class="inquiry-section">
                <h2>Request a Quote</h2>
                <p>Interested in our products? Contact us for detailed information and pricing.</p>
                <a href="index.html#contact" class="inquiry-btn">Contact Us</a>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Mlab Technical Service. All rights reserved.</p>
        <div id="admin-access">Admin Access</div>
    </footer>

    <div id="add-product-form-container" style="display: none;"></div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const isAdmin = localStorage.getItem('isAdmin') === 'true';
        const adminAccessButton = document.getElementById('admin-access');
        const formContainer = document.getElementById('add-product-form-container');
        
        loadProducts('lab');
        
        if (adminAccessButton) {
            adminAccessButton.addEventListener('click', function() {
                const password = prompt('Enter admin password:');
                if (password === '0030') {
                    localStorage.setItem('isAdmin', 'true');
                    showAdminInterface();
                } else {
                    alert('Incorrect password');
                }
            });
        }
        
        if (isAdmin) {
            showAdminInterface();
        }
        
        function showAdminInterface() {
            if (formContainer) {
                formContainer.style.display = 'block';
                formContainer.innerHTML = `
                    <div class="admin-panel">
                        <h3>Admin Panel</h3>
                        <form id="add-product-form" class="add-product-form">
                            <div class="form-group">
                                <label for="product">Product:</label>
                                <input type="text" id="product" name="product">
                            </div>
                            <div class="form-group">
                                <label for="code">Code:</label>
                                <input type="text" id="code" name="code">
                            </div>
                            <div class="form-group">
                                <label for="specifications">Specifications:</label>
                                <textarea id="specifications" name="specifications"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="image">Image:</label>
                                <input type="file" id="image" name="image" accept="image/*">
                            </div>
                            <button type="submit" class="btn">Add Product</button>
                        </form>
                        <button onclick="logout()" class="btn logout-btn">Logout</button>
                    </div>
                `;
                
                const form = document.getElementById('add-product-form');
                if (form) {
                    form.addEventListener('submit', function(e) {
                        e.preventDefault();
                        const product = document.getElementById('product').value;
                        const code = document.getElementById('code').value;
                        const specifications = document.getElementById('specifications').value;
                        const imageFile = document.getElementById('image').files[0];
                        
                        if (imageFile) {
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                saveProduct('lab', {
                                    product: product,
                                    code: code,
                                    specifications: specifications,
                                    image: event.target.result,
                                    id: Date.now().toString()
                                });
                                alert('产品添加成功！');
                                form.reset();
                                loadProducts('lab');
                            };
                            reader.readAsDataURL(imageFile);
                        } else {
                            saveProduct('lab', {
                                product: product,
                                code: code,
                                specifications: specifications,
                                image: '',
                                id: Date.now().toString()
                            });
                            alert('产品添加成功！');
                            form.reset();
                            loadProducts('lab');
                        }
                    });
                }
            }
            
            const deleteButtons = document.querySelectorAll('.delete-button');
            deleteButtons.forEach(button => {
                button.style.display = 'block';
            });
            
            if (adminAccessButton) {
                adminAccessButton.style.display = 'none';
            }
        }
        
        window.logout = function() {
            localStorage.removeItem('isAdmin');
            location.reload();
        };
        
        function saveProduct(category, productData) {
            let products = JSON.parse(localStorage.getItem(`${category}Products`) || '[]');
            products.push(productData);
            localStorage.setItem(`${category}Products`, JSON.stringify(products));
        }
        
        function loadProducts(category) {
            const productList = document.getElementById('productList');
            if (!productList) return;
            
            let products = JSON.parse(localStorage.getItem(`${category}Products`) || '[]');
            productList.innerHTML = '';
            
            products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'product-item';
                productElement.dataset.id = product.id;
                
                let imageHtml = '';
                if (product.image) {
                    imageHtml = `<img src="${product.image}" alt="${product.product}" class="product-image">`;
                }
                
                productElement.innerHTML = `
                    <div class="product-content">
                        <div class="product-image-container">
                            ${imageHtml}
                        </div>
                        <div class="product-details">
                            <div class="product-header">
                                <h3 class="product-name">${product.product || 'No Name'}</h3>
                                <span class="product-code">Code: ${product.code || 'N/A'}</span>
                                ${isAdmin ? '<button class="delete-button" onclick="deleteProduct(\'' + category + '\', \'' + product.id + '\')">×</button>' : ''}
                            </div>
                            <p class="product-specs">${product.specifications || 'No specifications provided'}</p>
                        </div>
                    </div>
                `;
                
                productList.appendChild(productElement);
            });
        }
        
        window.deleteProduct = function(category, productId) {
            if (confirm('确定要删除这个产品吗？')) {
                let products = JSON.parse(localStorage.getItem(`${category}Products`) || '[]');
                products = products.filter(p => p.id !== productId);
                localStorage.setItem(`${category}Products`, JSON.stringify(products));
                loadProducts(category);
            }
        };
    });
    </script>

    <style>
    .admin-panel {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        margin: 20px auto;
        max-width: 600px;
    }

    .logout-btn {
        background: #ff4444;
        color: white;
        margin-top: 10px;
    }

    .delete-button {
        display: none;
        position: absolute;
        top: 5px;
        right: 5px;
        background: red;
        color: white;
        border: none;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        font-size: 14px;
        cursor: pointer;
        text-align: center;
        line-height: 25px;
    }

    .product-item {
        position: relative;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        background: white;
    }

    .product-header {
        position: relative;
        margin-bottom: 10px;
    }

    .product-image {
        max-width: 100%;
        max-height: 200px;
        margin-bottom: 10px;
    }

    .product-code {
        color: #666;
        font-size: 0.9em;
        margin-bottom: 8px;
    }

    .product-specs {
        white-space: pre-line;
    }

    .product-content {
        display: flex;
        align-items: center;
    }

    .product-image-container {
        flex: 0 0 100px; /* 固定宽度 */
        margin-right: 15px; /* 图片与文本之间的间距 */
    }

    .product-image {
        max-width: 100%;
        max-height: 100px; /* 限制图片高度 */
        border-radius: 8px; /* 圆角 */
    }

    .product-details {
        flex: 1; /* 让文本部分占据剩余空间 */
    }

    .product-name {
        font-size: 1.1em; /* 产品名称字体大小 */
        margin: 0; /* 去掉默认的margin */
    }

    .product-code {
        font-size: 0.9em; /* 代码字体大小 */
        color: #666; /* 代码颜色 */
        margin-left: 10px; /* 产品名称和代码之间的间距 */
    }
    </style>
</body>
</html> 